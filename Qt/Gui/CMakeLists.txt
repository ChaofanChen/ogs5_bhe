# Source files
set( SOURCES
	main.cpp
	mainwindow.cpp
)

# Moc Header files
set( MOC_HEADERS
	mainwindow.h
)

# Header files
set( HEADERS

)

# UI files
set( UIS
	mainwindow.ui
)


# Run Qts user interface compiler uic on .ui files
qt4_wrap_ui( UI_HEADERS ${UIS} )

# Run Qts meta object compiler moc on header files
qt4_wrap_cpp( MOC_SOURCES ${MOC_HEADERS} )

# Include the headers which are generated by uic and moc
# and include additional header
include_directories(
	${CMAKE_BINARY_DIR}/Qt/Base
	${CMAKE_BINARY_DIR}/Qt/Gui
	${CMAKE_BINARY_DIR}/Qt/DataView
	${CMAKE_BINARY_DIR}/Qt/StationView
	${CMAKE_BINARY_DIR}/Qt/VtkVis
	../../Base
	../Base
	../DataView
	../../GEO
	../../FileIO
	../../MSH
	../../FEM
	../StationView
	../VtkVis
	#${OpenSG_INCLUDE_DIR}
	#${OpenSGSupportlibs_INCLUDE_DIR}
	${Shapelib_INCLUDE_DIR}	
)

# Put moc files in a project folder
source_group("UI Files" REGULAR_EXPRESSION "\\w*\\.ui")
source_group("Moc Files" REGULAR_EXPRESSION "moc_.*")


# Create the library
add_executable( ogs-gui
	${SOURCES}
	${HEADERS}
	${MOC_HEADERS}
	${MOC_SOURCES}

	${UIS}
)

# Link Qt library
target_link_libraries( ogs-gui
	${QT_LIBRARIES}
	Base
	GEO
	FileIO
	MSH
	FEM
	OGSProject
	QtBase
	QtDataView
	StationView
	${Shapelib_LIBRARIES}
	${libtiff_LIBRARIES}
	${libgeotiff_LIBRARIES}
	QVTK
	VtkVis
	#${OpenSG_LIBRARIES}
	#${OpenSGSupportlibs_LIBRARIES}
)

add_dependencies ( ogs-gui Base VtkVis OGSProject )

# Set linker flags
IF(MSVC)
	SET(CMAKE_EXE_LINKER_FLAGS_DEBUG "${CMAKE_EXE_LINKER_FLAGS_DEBUG} /NODEFAULTLIB:MSVCRT")
ENDIF(MSVC)
